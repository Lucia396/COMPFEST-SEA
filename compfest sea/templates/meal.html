<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/index.css">
    <title>SEA Catering</title>
</head>
<body>
    <div class="body">
        <div class="welcome">
            <!-- navigation bar -->
            <nav class="navbar">
                <div class="navlinks">
                    {% if session.email %}
                        <a href="{{ url_for('dashboard') }}" class="navlink">Account</a>
                    {% else %}
                        <a href="{{ url_for('login') }}" class="navlink">Login</a>
                    {% endif %}
                    <a href="{{ url_for('home') }}" class="navlink">Home</a>
                    <a href="{{ url_for('meal') }}" class="navlink active">Meal Plans</a>
                    <a href="{{ url_for('subscription') }}" class="navlink">Subscription</a>
                    <a href="{{ url_for('contact') }}" class="navlink">Contact Us</a>
                </div>
                <div class="logo">
                    <img src="../static/logo1.png" alt="Logo" class="navimage">
                    <img src="../static/logo2.png" alt="Logo" class="navimage">
                </div>
            </nav>

            <!-- meal card -->
            <div class="container" style="margin-top: 6.5rem;">
                <div class="title">üçΩÔ∏è Meal Plans üçΩÔ∏è</div>
                <div class="cardgroup">
                    {% for meal in meals %}
                        <div class="card">
                            <div class="cardimg"><img src="../static/meal{{ meal.MealPlanID }}.png" alt="{{ meal.MealPlanName }}"></div>
                            <div class="cardcontainer">
                                <h3 style="text-align: center;">{{ meal.MealPlanName }}</h3>
                                <p>{{ meal.ShortDes }}</p>
                                <h4>{{ meal.Price }}</h4>
                                <button id="card{{ meal.MealPlanID }}" class="cardbtn">See More Details</button>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
            </div>

            <!-- modal pop-up -->
            {% for meal in meals %}
                <div id="popup{{ meal.MealPlanID }}" class="popup">
                    <div class="popup-container">
                        <div class="popup-header">
                            <div class="popup-title">{{ meal.MealPlanName }}</div>
                            <button id="closebtn{{ meal.MealPlanID }}" class="popup-btn">&times;</button>
                        </div>
                        <div class="popup-message">
                            <div class="popup-description">{{ meal.Description }}</div>
                            <div class="popup-nutrition">
                                <div class="popup-nutrition-title">Nutritional Information</div>
                                {% for nutri in nutriinfo %}
                                    {% if nutri[0] == meal.MealPlanID %}
                                        {% for item in nutri %}
                                            {% if loop.index == 2 %}
                                                <div class="popup-serving">{{ item }}</div>
                                            {% elif loop.index > 2 %}
                                                <div class="popup-nutrition-item">{{ item }}</div>
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                {% endfor %}
                                
                                <div class="popup-nutrition-title">Allergens</div>
                                <div class="popup-tags">
                                    {% for allergen in allergens %}
                                        {% if allergen[0] == meal.MealPlanID %}
                                            {% for item in allergen %}
                                                {% if loop.index > 1 %}
                                                    <div class="popup-nutrition-item">{{ item }}</div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>

                                <div class="popup-nutrition-title">Tags</div>
                                <div class="popup-tags">
                                    {% for tag in tags %}
                                        {% if tag[0] == meal.MealPlanID %}
                                            {% for item in tag %}
                                                {% if loop.index > 1 %}
                                                    <div class="popup-nutrition-item">{{ item }}</div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <footer>
            <!-- contact details -->
            <div class="footer-container">
                <div class="footer-item1">Contact Us</div>
                <div class="footer-item2">Brian</div>
                <div class="footer-item2">‚òè 08123456789</div>
            </div>
        </footer>
        
        <script>
            // modal popup meal
            const meal1 = document.getElementById("card1");
            const meal2 = document.getElementById("card2");
            const meal3 = document.getElementById("card3");
            const meal4 = document.getElementById("card4");
            const meal5 = document.getElementById("card5");
            const meal6 = document.getElementById("card6");
            const meal7 = document.getElementById("card7");
            const meal8 = document.getElementById("card8");
            const meal9 = document.getElementById("card9");
            const popup1 = document.getElementById("popup1");
            const popup2 = document.getElementById("popup2");
            const popup3 = document.getElementById("popup3");
            const popup4 = document.getElementById("popup4");
            const popup5 = document.getElementById("popup5");
            const popup6 = document.getElementById("popup6");
            const popup7 = document.getElementById("popup7");
            const popup8 = document.getElementById("popup8");
            const popup9 = document.getElementById("popup9");
            const closebtn1 = document.getElementById("closebtn1");
            const closebtn2 = document.getElementById("closebtn2");
            const closebtn3 = document.getElementById("closebtn3");
            const closebtn4 = document.getElementById("closebtn4");
            const closebtn5 = document.getElementById("closebtn5");
            const closebtn6 = document.getElementById("closebtn6");
            const closebtn7 = document.getElementById("closebtn7");
            const closebtn8 = document.getElementById("closebtn8");
            const closebtn9 = document.getElementById("closebtn9");

            meal1.addEventListener("click", () => {
                popup1.classList.add("active");
                popup1.classList.add("open");
                popup1.style.display = "block";
            });
            meal2.addEventListener("click", () => {
                popup2.classList.add("active");
                popup2.classList.add("open");
                popup2.style.display = "block";
            });
            meal3.addEventListener("click", () => {
                popup3.classList.add("active");
                popup3.classList.add("open");
                popup3.style.display = "block";
            });
            meal4.addEventListener("click", () => {
                popup4.classList.add("active");
                popup4.classList.add("open");
                popup4.style.display = "block";
            });
            meal5.addEventListener("click", () => {
                popup5.classList.add("active");
                popup5.classList.add("open");
                popup5.style.display = "block";
            });
            meal6.addEventListener("click", () => {
                popup6.classList.add("active");
                popup6.classList.add("open");
                popup6.style.display = "block";
            });
            meal7.addEventListener("click", () => {
                popup7.classList.add("active");
                popup7.classList.add("open");
                popup7.style.display = "block";
            });
            meal8.addEventListener("click", () => {
                popup8.classList.add("active");
                popup8.classList.add("open");
                popup8.style.display = "block";
            });
            meal9.addEventListener("click", () => {
                popup9.classList.add("active");
                popup9.classList.add("open");
                popup9.style.display = "block";
            });

            closebtn1.addEventListener("click", () => {
                popup1.classList.add("slideOut");
                setTimeout(() => {
                    popup1.classList.remove("active", "slideOut");
                    popup1.style.display = "none";
                }, 200);
            });
            closebtn2.addEventListener("click", () => {
                popup2.classList.add("slideOut");
                setTimeout(() => {
                    popup2.classList.remove("active", "slideOut");
                    popup2.style.display = "none";
                }, 200);
            });
            closebtn3.addEventListener("click", () => {
                popup3.classList.add("slideOut");
                setTimeout(() => {
                    popup3.classList.remove("active", "slideOut");
                    popup3.style.display = "none";
                }, 200);
            });
            closebtn4.addEventListener("click", () => {
                popup4.classList.add("slideOut");
                setTimeout(() => {
                    popup4.classList.remove("active", "slideOut");
                    popup4.style.display = "none";
                }, 200);
            });
            closebtn5.addEventListener("click", () => {
                popup5.classList.add("slideOut");
                setTimeout(() => {
                    popup5.classList.remove("active", "slideOut");
                    popup5.style.display = "none";
                }, 200);
            });
            closebtn6.addEventListener("click", () => {
                popup6.classList.add("slideOut");
                setTimeout(() => {
                    popup6.classList.remove("active", "slideOut");
                    popup6.style.display = "none";
                }, 200);
            });
            closebtn7.addEventListener("click", () => {
                popup7.classList.add("slideOut");
                setTimeout(() => {
                    popup7.classList.remove("active", "slideOut");
                    popup7.style.display = "none";
                }, 200);
            });
            closebtn8.addEventListener("click", () => {
                popup8.classList.add("slideOut");
                setTimeout(() => {
                    popup8.classList.remove("active", "slideOut");
                    popup8.style.display = "none";
                }, 200);
            });
            closebtn9.addEventListener("click", () => {
                popup9.classList.add("slideOut");
                setTimeout(() => {
                    popup9.classList.remove("active", "slideOut");
                    popup9.style.display = "none";
                }, 200);
            });
        </script>
    </div>
</body>
</html>